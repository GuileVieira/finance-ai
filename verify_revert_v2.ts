import { db } from './lib/db/drizzle'; import { transactions, categories } from './lib/db/schema'; import { initializeDatabase } from './lib/db/init-db'; import { eq, ilike, and, or } from 'drizzle-orm'; async function main() { await initializeDatabase(); const txs = await db.select({ desc: transactions.description, cat: categories.name }).from(transactions).leftJoin(categories, eq(transactions.categoryId, categories.id)).where(or(ilike(transactions.description, '%TRANSFERÃŠNCIA RECEBIDA CF%'), ilike(transactions.description, '%ATLANTA%'))); txs.forEach(t => console.log(`${t.desc} -> ${t.cat}`)); } main().catch(console.error).then(() => process.exit(0));
